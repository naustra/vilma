---
const languages = [
  { code: 'mk', name: 'Македонски', flag: '🇲🇰' },
  { code: 'en', name: 'English', flag: '🇬🇧' },
  { code: 'fr', name: 'Français', flag: '🇫🇷' }
];
---

<div class="flex items-center space-x-2">
  {languages.map((lang) => (
    <a
      href={`/${lang.code}`}
      class={`text-2xl hover:opacity-80 transition-opacity ${
        Astro.currentLocale === lang.code ? 'opacity-100' : 'opacity-60'
      }`}
      title={lang.name}
    >
      {lang.flag}
    </a>
  ))}
</div>

<script>
  const button = document.getElementById('language-menu-button');
  const menu = document.getElementById('language-menu');

  button?.addEventListener('click', () => {
    menu?.classList.toggle('hidden');
  });

  // Fermer le menu quand on clique en dehors
  document.addEventListener('click', (event) => {
    if (!button?.contains(event.target as Node) && !menu?.contains(event.target as Node)) {
      menu?.classList.add('hidden');
    }
  });
</script>