---
const languages = [
  { code: 'mk', name: 'ÐœÐ°ÐºÐµÐ´Ð¾Ð½ÑÐºÐ¸', flag: 'ðŸ‡²ðŸ‡°' },
  { code: 'en', name: 'English', flag: 'ðŸ‡¬ðŸ‡§' },
  { code: 'fr', name: 'FranÃ§ais', flag: 'ðŸ‡«ðŸ‡·' }
];

const currentLanguage = languages.find(lang => lang.code === Astro.currentLocale) || languages[0];
---

<div class="flex items-center space-x-2">
  {languages.map((lang) => (
    <a
      href={`/${lang.code}`}
      class={`text-2xl hover:opacity-80 transition-opacity ${
        Astro.currentLocale === lang.code ? 'opacity-100' : 'opacity-60'
      }`}
      title={lang.name}
    >
      {lang.flag}
    </a>
  ))}
</div>

<script>
  const button = document.getElementById('language-menu-button');
  const menu = document.getElementById('language-menu');

  button?.addEventListener('click', () => {
    menu?.classList.toggle('hidden');
  });

  // Fermer le menu quand on clique en dehors
  document.addEventListener('click', (event) => {
    if (!button?.contains(event.target as Node) && !menu?.contains(event.target as Node)) {
      menu?.classList.add('hidden');
    }
  });
</script>